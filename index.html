
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CAT – Cultural Activity Team | RNSIT</title>
  <meta name="description" content="CAT (Cultural Activity Team) at RNSIT — Light, vibrant, comic style website. Register for events, join the club, and get updates." />

  <!-- Fonts (light & friendly) -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">

  <!-- Firebase (compat for simple inline usage) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <style>
    :root{
      /* Light Pastel Comic Palette */
      --bg: #f7f9fc;
      --bg-2: #ffffff;
      --text: #1c2c4a;
      --muted: #6b7b93;
      --border: rgba(28,44,74,0.12);
      --glass: rgba(255,255,255,0.75);

      --mint:    #B8E6D0;
      --sky:     #A8D8F0;
      --peach:   #FFC7B0;
      --lavender:#D7D3FF;
      --lemon:   #FFE9A9;
      --rose:    #FFB6C1;

      --grad-1: linear-gradient(135deg, #B8E6D0, #A8D8F0);
      --grad-2: linear-gradient(135deg, #FFC7B0, #D7D3FF);
      --grad-3: linear-gradient(135deg, #FFE9A9, #A8D8F0);

      --radius: 18px;
      --shadow: 0 16px 48px rgba(28,44,74,0.12);

      --font-head: "Baloo 2", system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial;
      --font-body: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:
      radial-gradient(900px 450px at 5% 0%, rgba(168,216,240,0.28), transparent 50%),
      radial-gradient(900px 450px at 95% 100%, rgba(255,231,160,0.28), transparent 50%),
      var(--bg);
      color:var(--text);font-family:var(--font-body);overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* Stickers (comic-style SVG doodles) */
    .sticker{position:fixed;z-index:-1;opacity:.45}
    .sticker svg{filter:drop-shadow(0 6px 12px rgba(28,44,74,0.12))}
    .s1{top:6%; left:-40px; width:160px}
    .s2{bottom:10%; right:-40px; width:160px}
    .s3{top:50%; left:75%; width:120px}

    /* Scroll progress (top bar + label) */
    #scrollProgress{position:fixed;top:0;left:0;height:6px;background:var(--grad-1);width:0%;z-index:1000}
    #scrollLabel{position:fixed;top:8px;right:12px;background:var(--glass);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:.85rem;color:var(--muted);backdrop-filter:blur(8px);z-index:1000}

    /* Left timeline dots */
    .timeline{position:fixed;left:12px;top:80px;display:flex;flex-direction:column;gap:14px;z-index:999}
    .dot{width:12px;height:12px;border-radius:50%;background:#e6eef7;border:1px solid var(--border);box-shadow:var(--shadow);transition:transform .25s ease, background .25s ease}
    .dot.active{background:#87c9ea; transform:scale(1.15)}

    /* Ticker (non-overlapping) */
    .ticker{position:sticky;top:0;z-index:60;background:var(--glass);border-bottom:1px solid var(--border);backdrop-filter:blur(10px)}
    .ticker-inner{display:flex;align-items:center;gap:12px;padding:10px 16px;overflow:hidden}
    .ticker-badge{font-family:var(--font-head);font-weight:700;background:#fff;border:1px solid var(--border);padding:8px 12px;border-radius:999px;color:#3b5c80}
    .ticker-track{white-space:nowrap;display:inline-block;will-change:transform}
    .ticker-items{display:inline-flex;gap:24px;align-items:center}
    .ticker-item{color:#3b5c80}
    .ticker:hover .ticker-track{animation-play-state:paused}
    @keyframes slideX{from{transform:translateX(0)}to{transform:translateX(-50%)}}

    /* Nav */
    .nav{position:sticky;top:54px;z-index:50;width:min(1200px,92%);margin:18px auto;background:var(--glass);border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
    .brand{font-family:var(--font-head);font-weight:700;display:flex;align-items:center;gap:10px}
    .brand-logo{width:34px;height:34px;border-radius:12px;background:var(--grad-2);box-shadow:0 8px 16px rgba(28,44,74,0.10)}
    .brand span{background:var(--grad-1);-webkit-background-clip:text;background-clip:text;color:transparent}
    .nav ul{display:flex;gap:16px;list-style:none;margin:0;padding:0}
    .nav a{padding:10px 12px;border-radius:10px;color:#3b5c80}
    .nav a:hover{background:#ffffff;box-shadow:0 10px 16px rgba(28,44,74,0.08)}
    .actions{display:flex;gap:10px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);cursor:pointer;transition:transform .2s ease, filter .2s ease, box-shadow .2s ease;position:relative;overflow:hidden;background:#fff;color:#294867}
    .btn-primary{background:var(--grad-1);color:#16324c;font-weight:700}
    .btn-outline{background:#ffffff;color:#294867;font-weight:600}
    .btn:hover{box-shadow:0 12px 20px rgba(28,44,74,0.10)}
    /* gentle magnetic */
    .btn.magnetic:hover{transform:translateY(-2px)}

    /* Hero */
    .hero{position:relative;width:min(1200px,92%);margin:24px auto;display:grid;grid-template-columns:1.1fr 0.9fr;gap:28px;align-items:center}
    .hero-card{background:var(--glass);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);transform-style:preserve-3d;perspective:900px}
    .hero h1{font-family:var(--font-head);font-weight:700;font-size:clamp(2rem, 3vw + 1rem, 3.6rem);line-height:1.03;margin:0 0 8px;color:#1c2c4a;text-shadow:
      0 2px 0 #fff, 0 4px 0 rgba(28,44,74,0.06), 0 8px 16px rgba(28,44,74,0.10)}
    .hero .sub{color:var(--muted);margin:0 0 18px}
    .hero .cta{display:flex;gap:12px;flex-wrap:wrap}
    .hero-media{border:1px solid var(--border);border-radius:var(--radius);background:#fff;box-shadow:var(--shadow);padding:16px}
    .hero-media .badge{background:#fff;border:1px solid var(--border);}

    /* Sections */
    section{width:min(1200px,92%);margin:40px auto}
    .section-title{font-family:var(--font-head);font-weight:700;font-size:clamp(1.6rem, 2.2vw + .8rem, 2.4rem);margin-bottom:10px;color:#2a4564}
    .section-sub{color:var(--muted);margin:-4px 0 22px}

    /* Event cards */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--glass);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;position:relative;overflow:hidden}
    .card h3{margin:0 0 8px;font-weight:700}
    .card p{color:var(--muted);margin:0 0 14px}
    .card .meta{display:flex;gap:10px;color:#466b92;font-weight:700}
    .badge{background:#fdfdfd;border:1px solid var(--border);padding:8px 12px;border-radius:999px;color:#466b92;font-weight:600}
    .hero-badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(28,44,74,0.20);backdrop-filter:blur(8px);z-index:1000}
    .modal.open{display:flex}
    .modal-card{width:min(760px,92%);background:var(--glass);border:1px solid var(--border);border-radius:20px;padding:18px;box-shadow:var(--shadow)}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .modal-title{font-weight:700}
    .close{cursor:pointer;opacity:.85}

    /* Forms */
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-row{display:flex;flex-direction:column;gap:8px}
    label{font-weight:600}
    input,select,textarea{background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:10px;color:var(--text)}
    textarea{min-height:100px}
    .terms{font-size:.95rem;color:var(--muted)}
    .error{color:#d65b5b;font-size:.9rem;min-height:18px}

    /* Cancel list */
    .list{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .list-item{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px}

    /* Committees */
    .committees{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    .committee{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:var(--shadow);text-align:center}
    .committee .icon{font-size:28px;margin-bottom:8px;color:#466b92}
    .committee h4{margin:6px 0 4px;font-weight:700}
    .committee p{color:var(--muted);font-size:.95rem}

    /* Members carousel */
    .carousel{position:relative;background:var(--glass);border:1px solid var(--border);border-radius:20px;padding:14px;overflow:hidden}
    .carousel-track{display:flex;gap:16px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:12px}
    .member{min-width:240px;scroll-snap-align:start;background:#fff;border:1px solid var(--border);border-radius:18px;padding:12px;box-shadow:var(--shadow);text-align:center}
    .member img{width:92px;height:92px;border-radius:18px;margin:10px auto;object-fit:cover;box-shadow:0 10px 24px rgba(28,44,74,0.10)}
    .role{color:#466b92;font-weight:700;margin-top:4px}

    /* Chatbot */
    .chat-launch{position:fixed;right:18px;bottom:18px;z-index:60;background:#fff;color:#294867;border:1px solid var(--border);border-radius:999px;padding:12px 16px;box-shadow:var(--shadow);cursor:pointer;font-weight:700}
    .chat{position:fixed;right:18px;bottom:78px;width:360px;max-height:60vh;z-index:60;background:var(--glass);border:1px solid var(--border);border-radius:20px;display:none;flex-direction:column;overflow:hidden}
    .chat.open{display:flex}
    .chat-header{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border)}
    .chat-body{padding:10px;display:flex;flex-direction:column;gap:10px;overflow:auto}
    .bubble{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px}
    .bubble.me{background:#f7fbff}
    .chat-form{display:flex;gap:8px;padding:10px;border-top:1px solid var(--border)}
    .chat-form input{flex:1}

    /* Footer */
    footer{border-top:1px solid var(--border);background:#ffffff;padding:22px 0;margin-top:40px}
    .footer-inner{width:min(1200px,92%);margin:0 auto;display:flex;justify-content:space-between;align-items:center;color:var(--muted)}

    /* Responsive */
    @media (max-width:960px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr 1fr}
      .form-grid{grid-template-columns:1fr}
      .committees{grid-template-columns:1fr 1fr}
    }
    @media (max-width:680px){
      .grid{grid-template-columns:1fr}
      .committees{grid-template-columns:1fr}
    }
  </style>
</head>
<body>

  <!-- Scroll progress -->
  <div id="scrollProgress"></div>
  <div id="scrollLabel">Scroll 0%</div>

  <!-- Left timeline dots -->
  <div class="timeline" aria-hidden="true">
    <div class="dot" id="dot-hero"></div>
    <div class="dot" id="dot-events"></div>
    <div class="dot" id="dot-recruitment"></div>
    <div class="dot" id="dot-committees"></div>
    <div class="dot" id="dot-members"></div>
    <div class="dot" id="dot-contact"></div>
  </div>

  <!-- Comic stickers -->
  <div class="sticker s1">
    <svg viewBox="0 0 120 120">
      <circle cx="60" cy="60" r="40" fill="#FFE9A9"/>
      <path d="M25 55 L95 55" stroke="#A8D8F0" stroke-width="6" stroke-linecap="round"/>
      <path d="M25 68 L95 68" stroke="#FFC7B0" stroke-width="6" stroke-linecap="round"/>
    </svg>
  </div>
  <div class="sticker s2">
    <svg viewBox="0 0 120 120">
      <rect x="25" y="25" width="70" height="70" rx="16" fill="#B8E6D0"/>
      <circle cx="60" cy="60" r="8" fill="#D7D3FF"/>
      <circle cx="84" cy="60" r="8" fill="#FFC7B0"/>
      <circle cx="36" cy="60" r="8" fill="#FFE9A9"/>
    </svg>
  </div>
  <div class="sticker s3">
    <svg viewBox="0 0 120 120">
      <path d="M20 80 C40 40, 80 40, 100 80" stroke="#FFB6C1" stroke-width="8" fill="none" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- Ticker (live updates) -->
  <div class="ticker">
    <div class="ticker-inner">
      <div class="ticker-badge"><i class="fa-solid fa-bullhorn"></i>&nbsp;Live @ RNSIT</div>
      <div class="ticker-track" id="tickerTrack" aria-live="polite">
        <div class="ticker-items" id="tickerItems"></div>
      </div>
    </div>
  </div>

  <!-- Nav -->
  <nav class="nav">
    <div class="brand"><div class="brand-logo"></div>CAT <span>RNSIT</span></div>
    <ul>
      <li><a href="#events">Events</a></li>
      <li><a href="#recruitment">Recruitment</a></li>
      <li><a href="#committees">Committees</a></li>
      <li><a href="#members">Members</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
    <div class="actions">
      <button class="btn btn-outline magnetic" id="signInBtn"><i class="fa-brands fa-google"></i> Sign in</button>
      <button class="btn btn-primary magnetic" onclick="document.querySelector('#newsletterModal').classList.add('open')"><i class="fa-solid fa-envelope-open-text"></i> Updates</button>
      <button class="btn btn-outline magnetic" id="signOutBtn" style="display:none"><i class="fa-solid fa-right-from-bracket"></i> Sign out</button>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero" id="hero">
    <div class="hero-card tilt" id="heroCard">
      <h1>Cultural Activity Team</h1>
      <p class="sub">Light, vibrant, and comic-styled website for <strong>RNSIT</strong>. Register for events, join CAT, and stay updated smoothly.</p>
      <div class="cta">
        <button class="btn btn-primary magnetic" onclick="document.getElementById('events').scrollIntoView({behavior:'smooth'})"><i class="fa-solid fa-ticket"></i> Register for Events</button>
        <button class="btn btn-outline magnetic" onclick="document.getElementById('recruitment').scrollIntoView({behavior:'smooth'})"><i class="fa-solid fa-user-plus"></i> Join CAT</button>
      </div>
      <div class="hero-badges" style="margin-top:10px">
        <span class="badge">Pastel • Light • Comic</span>
        <span class="badge">3D-ish card tilt</span>
        <span class="badge">Scroll progress timeline</span>
      </div>
    </div>

    <div class="hero-media tilt">
      <h3 style="margin:0 0 8px;font-weight:700">What’s new?</h3>
      <p class="sub">Upcoming fests, workshops, and campus shows — see the live ticker and full list below.</p>
      <div class="hero-badges">
        <span class="badge">No neon</span>
        <span class="badge">Digital stickers</span>
        <span class="badge">Clean animations</span>
      </div>
    </div>
  </section>

  <!-- Events -->
  <section id="events">
    <h2 class="section-title">Active & Upcoming Events</h2>
    <p class="section-sub">Register easily. Receive updates via email & on this site. Cancel only under terms.</p>
    <div class="grid" id="eventsGrid"></div>

    <!-- Manage / Cancel -->
    <div class="hero-card" style="margin-top:22px">
      <h3 style="margin:0 0 8px">Manage / Cancel Registration</h3>
      <p class="sub">Enter your email to view your registrations and cancel (limited by T&C).</p>
      <div class="form-grid">
        <div class="form-row">
          <label for="manageEmail">Your email</label>
          <input id="manageEmail" type="email" placeholder="name@rnsit.edu.in" />
        </div>
        <div class="form-row">
          <label>&nbsp;</label>
          <button class="btn btn-outline magnetic" onclick="loadMyRegistrations()"><i class="fa-solid fa-list"></i> Load registrations</button>
        </div>
      </div>
      <div id="myRegs" class="list" style="margin-top:12px"></div>
      <p class="terms" style="margin-top:8px"><a href="javascript:void(0)" onclick="openTerms()">View Terms & Conditions</a></p>
    </div>
  </section>

  <!-- Recruitment -->
  <section id="recruitment">
    <h2 class="section-title">Join CAT — Recruitment</h2>
    <p class="section-sub">Become part of the backbone behind every RNSIT cultural event.</p>
    <div id="recruitmentStatus" class="pill"><i class="fa-solid fa-minus"></i> Recruitment currently closed</div>

    <div id="recruitmentFormWrap" class="hero-card" style="margin-top:14px;display:none">
      <h3 style="margin:0 0 10px">Apply to CAT</h3>
      <div class="form-grid">
        <div class="form-row"><label for="rName">Full name</label><input id="rName" type="text" placeholder="Your name" /></div>
        <div class="form-row"><label for="rEmail">College email</label><input id="rEmail" type="email" placeholder="yourid@rnsit.edu.in" /></div>
        <div class="form-row"><label for="rYear">Year</label>
          <select id="rYear"><option value="">Select</option><option>1st Year</option><option>2nd Year</option><option>3rd Year</option><option>4th Year</option></select></div>
        <div class="form-row"><label for="rDept">Department</label><input id="rDept" type="text" placeholder="CSE/ISE/ECE/EEE/ME/BT/..." /></div>
        <div class="form-row" style="grid-column:1/-1"><label for="rMotivation">Why do you want to join?</label><textarea id="rMotivation" placeholder="Tell us about your interest and experience"></textarea></div>
      </div>
      <div class="actions" style="margin-top:12px">
        <button class="btn btn-primary magnetic" onclick="submitRecruitment()"><i class="fa-solid fa-paper-plane"></i> Submit application</button>
        <span id="rStatus" class="terms"></span>
      </div>
      <p class="terms" style="margin-top:10px">Verification is done by CAT leads via email/phone. You’ll receive a status mail upon review.</p>
    </div>
  </section>

  <!-- Committees -->
  <section id="committees">
    <h2 class="section-title">CAT Committees</h2>
    <p class="section-sub">Eight squads making ideas real: Events, DMC, Decor, Sponsorship, Jukebox, Disciplinary, Hospitality, PR.</p>
    <div class="committees">
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-calendar-check"></i></div><h4>Events</h4><p>Plan & run shows, fests, and workshops.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-camera"></i></div><h4>DMC</h4><p>Media, design, coverage & content.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-wand-magic-sparkles"></i></div><h4>Decor</h4><p>Stage, sets, props & ambience.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-handshake-angle"></i></div><h4>Sponsorship</h4><p>Partners, budget & benefits.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-music"></i></div><h4>Jukebox</h4><p>Sound, playlists & vibes.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-shield-halved"></i></div><h4>Disciplinary</h4><p>Codes, safety & crowd control.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-people-carry-box"></i></div><h4>Hospitality</h4><p>Guests, logistics & care.</p></div>
      <div class="committee tilt"><div class="icon"><i class="fa-solid fa-bullhorn"></i></div><h4>PR</h4><p>Promotion, outreach & buzz.</p></div>
    </div>
  </section>

  <!-- Members -->
  <section id="members">
    <h2 class="section-title">CAT Crew • The Backbone</h2>
    <p class="section-sub">A few of the many members powering festivals, shows, and everything in between.</p>
    <div class="carousel">
      <div class="carousel-track" id="membersTrack"></div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact">
    <h2 class="section-title">Contact CAT</h2>
    <p class="section-sub">Questions? Collaborations? Stage ideas? Drop a message.</p>
    <div class="hero-card">
      <div class="form-grid">
        <div class="form-row"><label for="cName">Name</label><input id="cName" type="text" placeholder="Your name" /></div>
        <div class="form-row"><label for="cEmail">Email</label><input id="cEmail" type="email" placeholder="you@rnsit.edu.in" /></div>
        <div class="form-row"><label for="cTopic">Topic</label>
          <select id="cTopic"><option>General query</option><option>Event registration issue</option><option>Volunteer / Join</option><option>Collaboration</option></select>
        </div>
        <div class="form-row" style="grid-column:1/-1"><label for="cMsg">Message</label><textarea id="cMsg" placeholder="Type your message"></textarea></div>
      </div>
      <div class="actions" style="margin-top:12px">
        <button class="btn btn-primary magnetic" onclick="submitContact()"><i class="fa-solid fa-share"></i> Send</button>
        <span id="cStatus" class="terms"></span>
      </div>
    </div>
  </section>

  <!-- Newsletter modal -->
  <div class="modal" id="newsletterModal">
    <div class="modal-card">
      <div class="modal-header">
        <div class="modal-title"><i class="fa-solid fa-envelope-open-text"></i> Subscribe to CAT updates</div>
        <div class="close" onclick="document.querySelector('#newsletterModal').classList.remove('open')"><i class="fa-solid fa-xmark"></i></div>
      </div>
      <p class="terms">Sign up using Google or your college email to receive newsletters & event alerts.</p>
      <div class="form-grid">
        <div class="form-row">
          <label>Email</label>
          <input id="nEmail" type="email" placeholder="yourid@rnsit.edu.in" />
          <small class="error" id="nError"></small>
        </div>
        <div class="form-row">
          <label>&nbsp;</label>
          <button class="btn btn-outline magnetic" onclick="subscribeNewsletter()"><i class="fa-solid fa-bell"></i> Subscribe</button>
        </div>
        <div class="form-row" style="grid-column:1/-1">
          <button class="btn btn-primary magnetic" onclick="googleSignInStart()"><i class="fa-brands fa-google"></i> Sign in with Google</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Register modal -->
  <div class="modal" id="registerModal">
    <div class="modal-card">
      <div class="modal-header">
        <div class="modal-title"><i class="fa-solid fa-ticket"></i> Event Registration</div>
        <div class="close" onclick="closeRegister()"><i class="fa-solid fa-xmark"></i></div>
      </div>
      <div id="regEventName" class="terms" style="margin-bottom:6px"></div>
      <div class="form-grid">
        <div class="form-row"><label for="regName">Full name</label><input id="regName" type="text" placeholder="Your name"></div>
        <div class="form-row"><label for="regEmail">Email</label><input id="regEmail" type="email" placeholder="you@rnsit.edu.in"></div>
        <div class="form-row"><label for="regUSN">USN / Roll</label><input id="regUSN" type="text" placeholder="RNSITxxxxxx"></div>
        <div class="form-row"><label for="regDept">Department</label><input id="regDept" type="text" placeholder="CSE/ISE/ECE/EEE/ME/BT/..."></div>
        <div class="form-row" style="grid-column:1/-1"><label for="regNotes">Notes</label><textarea id="regNotes" placeholder="Any special requirements"></textarea></div>
      </div>
      <div class="actions" style="margin-top:12px">
        <button class="btn btn-primary magnetic" onclick="submitRegistration()"><i class="fa-solid fa-check"></i> Confirm registration</button>
        <span id="regStatus" class="terms"></span>
      </div>
      <p class="terms" style="margin-top:8px">By registering, you agree to CAT’s event terms. You’ll receive schedule & update mails.</p>
    </div>
  </div>

  <!-- Terms modal -->
  <div class="modal" id="termsModal">
    <div class="modal-card">
      <div class="modal-header">
        <div class="modal-title"><i class="fa-solid fa-file-shield"></i> Terms & Conditions</div>
        <div class="close" onclick="document.querySelector('#termsModal').classList.remove('open')"><i class="fa-solid fa-xmark"></i></div>
      </div>
      <div style="max-height:50vh;overflow:auto">
        <ul>
          <li>Cancellations allowed only 24+ hours before event start, except emergencies verified by CAT.</li>
          <li>Repeated last-minute cancellations may limit future registrations.</li>
          <li>Use correct details (USN/Email) for verification & updates.</li>
          <li>Photos/videos taken at events may be used for promotion.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Chatbot -->
  <button class="chat-launch magnetic" id="chatOpen"><i class="fa-solid fa-comment"></i> Ask CAT</button>
  <div class="chat" id="chatBox">
    <div class="chat-header">
      <strong><i class="fa-solid fa-robot"></i> CAT Helpdesk</strong>
      <span class="close" onclick="toggleChat(false)"><i class="fa-solid fa-xmark"></i></span>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="bubble">Hi! Ask your question or share your details. CAT team will contact you.</div>
    </div>
    <div class="chat-form">
      <input id="chatInput" type="text" placeholder="Type your question..." />
      <button class="btn btn-primary btn-small" onclick="sendChat()"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-inner">
      <div>© <span id="year"></span> CAT • RNSIT</div>
      <div>Made with <i class="fa-solid fa-heart" style="color:#ff7b7b"></i> by CAT</div>
    </div>
  </footer>

  <script>
    // ======= CONFIG =======
    const RECRUITMENT_OPEN = false; // set true during drives
    const EVENTS = [
      { id:"beats25", name:"Campus Beats ’25", when:"Jan 28, 2025", where:"Main Stage", type:"Fest", desc:"Music & dance showcase with teams and solo slots.", tags:["Music","Dance","Show"], upcoming:true },
      { id:"dramix",  name:"Dramix – Theatre Night", when:"Feb 14, 2025", where:"Auditorium", type:"Show", desc:"Drama, comedy, improv — stage & crew.", tags:["Theatre","Improv"], upcoming:true },
      { id:"artjam",  name:"ArtJam – Pop Art Workshop", when:"Feb 28, 2025", where:"Courtyard", type:"Workshop", desc:"Campus artists leading hands-on sessions.", tags:["Art","Workshop"], upcoming:true },
      { id:"battle",  name:"Beat Battle – DJ vs DJ", when:"Mar 8, 2025", where:"Open Arena", type:"Battle", desc:"Live crowd vote. Limited slots.", tags:["DJ","Battle"], upcoming:true },
    ];

    // ======= YEAR =======
    document.getElementById("year").textContent = new Date().getFullYear();

    // ======= TILT (simple 3D-ish) =======
    document.querySelectorAll('.tilt').forEach(el=>{
      el.addEventListener('mousemove', (e)=>{
        const r = el.getBoundingClientRect();
        const x = e.clientX - r.left;
        const y = e.clientY - r.top;
        const rotX = ((y / r.height) - 0.5) * -8;
        const rotY = ((x / r.width) - 0.5) * 8;
        el.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      });
      el.addEventListener('mouseleave', ()=> el.style.transform = 'rotateX(0) rotateY(0)');
    });

    // ======= SCROLL PROGRESS BAR + LABEL =======
    function updateScrollProgress(){
      const doc = document.documentElement;
      const scrollTop = doc.scrollTop || document.body.scrollTop;
      const scrollHeight = doc.scrollHeight - doc.clientHeight;
      const percent = scrollHeight ? Math.round((scrollTop / scrollHeight) * 100) : 0;
      document.getElementById('scrollProgress').style.width = percent + '%';
      document.getElementById('scrollLabel').textContent = `Scroll ${percent}%`;
    }
    window.addEventListener('scroll', updateScrollProgress);
    window.addEventListener('load', updateScrollProgress);

    // ======= LEFT TIMELINE DOTS =======
    const sections = [
      {id:'hero', dot:'dot-hero'},
      {id:'events', dot:'dot-events'},
      {id:'recruitment', dot:'dot-recruitment'},
      {id:'committees', dot:'dot-committees'},
      {id:'members', dot:'dot-members'},
      {id:'contact', dot:'dot-contact'},
    ];
    const observer = new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        const secId = entry.target.id;
        const cfg = sections.find(s=>s.id===secId);
        if(!cfg) return;
        const dot = document.getElementById(cfg.dot);
        if(entry.isIntersecting) dot.classList.add('active');
        else dot.classList.remove('active');
      });
    }, {threshold:0.3});
    sections.forEach(s=>{
      const el = document.getElementById(s.id);
      if(el) observer.observe(el);
    });

    // ======= NEWS TICKER (non-overlapping) =======
    function renderTicker(){
      const itemsEl = document.getElementById("tickerItems");
      const items = EVENTS.map(ev => `<span class="ticker-item"><i class="fa-solid fa-star"></i> <strong>${ev.name}</strong> • ${ev.when} @ ${ev.where}</span>`).join("");
      // Duplicate content to allow infinite scroll
      itemsEl.innerHTML = items + items;
      const track = document.getElementById("tickerTrack");
      // Apply animation only after DOM paints to prevent overlap
      requestAnimationFrame(()=>{
        track.style.animation = "slideX 20s linear infinite";
      });
    }
    renderTicker();

    // ======= EVENTS GRID =======
    const grid = document.getElementById("eventsGrid");
    function tagPills(tags){ return tags.map(t => `<span class="badge">${t}</span>`).join(" "); }
    function renderEvents(){
      grid.innerHTML = EVENTS.map(ev => `
        <div class="card tilt">
          <h3>${ev.name}</h3>
          <p>${ev.desc}</p>
          <div class="meta"><span><i class="fa-solid fa-calendar"></i> ${ev.when}</span> • <span><i class="fa-solid fa-location-dot"></i> ${ev.where}</span></div>
          <div class="hero-badges">${tagPills(ev.tags)}</div>
          <div class="actions" style="margin-top:10px">
            <button class="btn btn-primary magnetic" onclick="openRegister('${ev.id}')"><i class="fa-solid fa-ticket"></i> Register</button>
          </div>
        </div>
      `).join("");
    }
    renderEvents();

    // ======= REGISTER =======
    let currentEventId = null;
    function openRegister(id){
      currentEventId = id;
      const ev = EVENTS.find(e=>e.id===id);
      document.getElementById("regEventName").innerHTML = `<strong>Event:</strong> ${ev.name} • <em>${ev.when} @ ${ev.where}</em>`;
      document.getElementById("registerModal").classList.add("open");
      document.getElementById("regStatus").textContent = "";
    }
    function closeRegister(){ document.getElementById("registerModal").classList.remove("open"); }
    function submitRegistration(){
      const name = document.getElementById("regName").value.trim();
      const email = document.getElementById("regEmail").value.trim();
      const usn = document.getElementById("regUSN").value.trim();
      const dept = document.getElementById("regDept").value.trim();
      const notes = document.getElementById("regNotes").value.trim();
      const status = document.getElementById("regStatus");
      if(!name || !email || !usn || !dept){ status.textContent = "Please fill all required fields."; return; }
      const ev = EVENTS.find(e=>e.id===currentEventId);
      const entry = {id: crypto.randomUUID(), eventId: ev.id, eventName: ev.name, name, email, usn, dept, notes, ts: Date.now(), status:"Active"};
      const store = JSON.parse(localStorage.getItem("catRegs")||"[]"); store.push(entry);
      localStorage.setItem("catRegs", JSON.stringify(store));
      status.textContent = "Registered! You’ll receive updates via email.";
      setTimeout(()=> closeRegister(), 900);
    }

    // ======= CANCEL =======
    function loadMyRegistrations(){
      const email = document.getElementById("manageEmail").value.trim();
      const wrap = document.getElementById("myRegs");
      wrap.innerHTML = "";
      if(!email){ wrap.innerHTML = `<div class="terms">Enter your email above.</div>`; return; }
      const store = JSON.parse(localStorage.getItem("catRegs")||"[]").filter(r=>r.email===email);
      if(store.length===0){ wrap.innerHTML = `<div class="terms">No registrations found for ${email}.</div>`; return; }
      wrap.innerHTML = store.map(r=>`
        <div class="list-item">
          <strong>${r.eventName}</strong><br>
          <small class="terms">${new Date(r.ts).toLocaleString()} • Status: ${r.status}</small>
          <div style="margin-top:8px">
            <select id="reason-${r.id}">
              <option value="">Select reason</option>
              <option>Medical emergency</option>
              <option>Exam clash</option>
              <option>Personal reasons</option>
              <option>Other (explain)</option>
            </select>
            <button class="btn btn-outline btn-small magnetic" onclick="cancelReg('${r.id}')"><i class="fa-solid fa-ban"></i> Cancel</button>
          </div>
        </div>
      `).join("");
    }
    function cancelReg(id){
      const store = JSON.parse(localStorage.getItem("catRegs")||"[]");
      const idx = store.findIndex(r=>r.id===id); if(idx<0) return;
      const reasonSel = document.getElementById(`reason-${id}`);
      const reason = reasonSel?.value || "";
      if(!reason){ alert("Please select a cancellation reason."); return; }
      store[idx].status = "Cancelled"; store[idx].cancelReason = reason;
      localStorage.setItem("catRegs", JSON.stringify(store));
      loadMyRegistrations();
      alert("Your registration has been cancelled under CAT terms. You’ll get a confirmation mail.");
    }

    // ======= RECRUITMENT =======
    const statusEl = document.getElementById("recruitmentStatus");
    const formWrap = document.getElementById("recruitmentFormWrap");
    if(RECRUITMENT_OPEN){ statusEl.innerHTML = `<i class="fa-solid fa-bolt"></i> Recruitment open now`; formWrap.style.display = "block"; }
    function submitRecruitment(){
      const rName = document.getElementById("rName").value.trim();
      const rEmail = document.getElementById("rEmail").value.trim();
      const rYear = document.getElementById("rYear").value.trim();
      const rDept = document.getElementById("rDept").value.trim();
      const rMotivation = document.getElementById("rMotivation").value.trim();
      const rStatus = document.getElementById("rStatus");
      if(!rName || !rEmail || !rYear || !rDept){ rStatus.textContent = "Fill all required fields."; return; }
      const store = JSON.parse(localStorage.getItem("catRecruit")||"[]");
      store.push({id:crypto.randomUUID(), rName, rEmail, rYear, rDept, rMotivation, ts:Date.now(), status:"Submitted"});
      localStorage.setItem("catRecruit", JSON.stringify(store));
      rStatus.textContent = "Application submitted. Verification will follow via email.";
    }

    // ======= MEMBERS =======
    const MEMBERS = [
      {name:"Ananya", role:"President", img:"https://i.pravatar.cc/150?img=5"},
      {name:"Rahul", role:"Vice President", img:"https://i.pravatar.cc/150?img=12"},
      {name:"Meera", role:"Events Lead", img:"https://i.pravatar.cc/150?img=23"},
      {name:"Arjun", role:"Stage Manager", img:"https://i.pravatar.cc/150?img=32"},
      {name:"Riya", role:"Design Lead", img:"https://i.pravatar.cc/150?img=45"},
      {name:"Neha", role:"PR & Outreach", img:"https://i.pravatar.cc/150?img=15"},
      {name:"Kunal", role:"Logistics", img:"https://i.pravatar.cc/150?img=28"},
      {name:"Varun", role:"Music Coord", img:"https://i.pravatar.cc/150?img=38"},
      {name:"Sneha", role:"Dance Coord", img:"https://i.pravatar.cc/150?img=49"},
    ];
    const membersTrack = document.getElementById("membersTrack");
    function renderMembers(){
      membersTrack.innerHTML = MEMBERS.map(m=>`
        <div class="member tilt">
          <img src="${m.img}" alt="${m.name}" />
          <div style="font-weight:700">${m.name}</div>
          <div class="role">${m.role}</div>
        </div>
      `).join("");
      // Gentle auto-scroll
      let rafId;
      function loop(){ membersTrack.scrollLeft += 0.4; rafId = requestAnimationFrame(loop); }
      loop();
      membersTrack.addEventListener("mouseenter", ()=> cancelAnimationFrame(rafId));
      membersTrack.addEventListener("mouseleave", ()=> { rafId = requestAnimationFrame(loop); });
    }
    renderMembers();

    // ======= CONTACT =======
    function submitContact(){
      const n = document.getElementById("cName").value.trim();
      const e = document.getElementById("cEmail").value.trim();
      const t = document.getElementById("cTopic").value.trim();
      const m = document.getElementById("cMsg").value.trim();
      const s = document.getElementById("cStatus");
      if(!n || !e || !m){ s.textContent = "Please fill the required fields."; return; }
      const store = JSON.parse(localStorage.getItem("catContact")||"[]");
      store.push({id:crypto.randomUUID(), n,e,t,m, ts:Date.now()});
      localStorage.setItem("catContact", JSON.stringify(store));
      s.textContent = "Sent! CAT team will reach out.";
    }

    // ======= NEWSLETTER =======
    function subscribeNewsletter(){
      const email = document.getElementById("nEmail").value.trim();
      const err = document.getElementById("nError"); err.textContent = "";
      if(!email || !email.includes("@")){ err.textContent = "Enter a valid email."; return; }
      const store = JSON.parse(localStorage.getItem("catNews")||"[]");
      if(store.includes(email)){ err.textContent = "Already subscribed."; return; }
      store.push(email); localStorage.setItem("catNews", JSON.stringify(store));
      alert("Subscribed! You’ll receive CAT newsletters.");
      document.querySelector('#newsletterModal').classList.remove('open');
    }

    // ======= CHATBOT =======
    function toggleChat(open){ document.getElementById("chatBox").classList.toggle("open", open); }
    document.getElementById("chatOpen").addEventListener("click", ()=> toggleChat(true));
    function sendChat(){
      const input = document.getElementById("chatInput");
      const msg = input.value.trim(); if(!msg) return;
      const body = document.getElementById("chatBody");
      body.insertAdjacentHTML("beforeend", `<div class="bubble me">${msg}</div>`); input.value = ""; body.scrollTop = body.scrollHeight;
      setTimeout(()=>{
        body.insertAdjacentHTML("beforeend", `<div class="bubble">Thanks! We’ll contact you soon. For urgent matters, mail <strong>cat@rnsit.edu.in</strong>.</div>`);
        body.scrollTop = body.scrollHeight;
      }, 650);
    }

    // ======= TERMS =======
    function openTerms(){ document.getElementById("termsModal").classList.add("open"); }

    // ======= MODAL CLOSE ON BACKDROP CLICK =======
    document.querySelectorAll('.modal').forEach(m=>{
      m.addEventListener('click', (e)=>{ if(e.target === m) m.classList.remove('open'); });
    });

    // ======= FIREBASE AUTH (Google Sign-In) =======
    // TODO: paste your Firebase config below (from Firebase Console)
    const firebaseConfig = {
      apiKey: "PASTE_API_KEY",
      authDomain: "PASTE_PROJECT.firebaseapp.com",
      projectId: "PASTE_PROJECT",
      appId: "PASTE_APP_ID"
    };
    try {
      firebase.initializeApp(firebaseConfig);
    } catch (e) {
      console.warn("Firebase not initialized. Paste your config.", e);
    }
    const auth = firebase.apps?.length ? firebase.auth() : null;
    const provider = auth ? new firebase.auth.GoogleAuthProvider() : null;

    function googleSignInStart(){
      if(!auth){ alert("Firebase not configured. Paste config in code."); return; }
      auth.signInWithPopup(provider).then((result)=>{
        // Optional domain limit (RNSIT)
        const email = result.user?.email || "";
        if(!email.endsWith("@rnsit.edu.in")){
          alert("Signed in. For exclusive campus updates, use your @rnsit.edu.in ID.");
        }
      }).catch(err=> alert("Sign-in error: " + err.message));
    }
    const signInBtn = document.getElementById('signInBtn');
    const signOutBtn = document.getElementById('signOutBtn');
    signInBtn.addEventListener('click', googleSignInStart);

    if(auth){
      auth.onAuthStateChanged(user=>{
        if(user){
          signInBtn.style.display = 'none';
          signOutBtn.style.display = 'inline-flex';
          signOutBtn.onclick = ()=> auth.signOut();
        } else {
          signOutBtn.style.display = 'none';
          signInBtn.style.display = 'inline-flex';
        }
      });
    }

    // ======= ACCESSIBILITY & NO OVERLAP SAFETY =======
    // Ensure ticker height is stable & items single-line
    window.addEventListener('resize', ()=>{
      document.querySelectorAll('.ticker-item').forEach(el=> el.style.whiteSpace = 'nowrap');
    });
  </script>
</body>
</html>
